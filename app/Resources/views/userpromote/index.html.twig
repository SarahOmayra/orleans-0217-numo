{% extends 'layoutAdmin.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/styleonoffbutton.css') }}">
{% endblock %}

{% block body %}
    <div class="container font-lato">
        <h1 class="titreadmin font-lato">MEMBRES</h1>

        <div class="text-center">
            <nav class="AlphabetNav">
                <a id="AlphabetNavAll" href="">TOUS</a>
                {%  for letter in 'A'..'Z' %}
                    <a href="">{{ letter }}</a>
                {% endfor %}
            </nav>
        </div>

        <table>
            <thead>
            <tr class="text-center admin">
                <th class="text-center">NOM</th>
                <th class="text-center">PRENOM</th>
                <th class="text-center">MEMBRE DE CONFIANCE</th>
                <th class="text-center">STATUT</th>
                <th class="text-center">ACTION</th>
                <th class="text-center">DESACTIVER</th>
            </tr>
            </thead>
            <tbody>
            {% for user in users %}
                <tr class="showMember">
                    <td class="admin memberName">{{ user.name }}</td>
                    <td class="admin">{{ user.firstname }}</td>
                    <td class="admin">

                        <a href="{{ path('member_trust', {'id': user.id}) }}">
                            <button class="onoff {{ user.trust == 0 ? 'red' : 'green' }}">
                                {{ user.trust == 0 ? 'NON' : 'OUI' }}
                            </button></a>
                    </td>

                    <td class="admin">{{ user.roles.0 }}</td>
                    <td class="admin">
                        <button type="button" class="button-admin" data-toggle="modal" data-target="#exampleModal"
                                data-id="{{ user.id }}" data-name="{{ user.name }}"
                                data-firstname="{{ user.firstname }}">PROMOUVOIR</button>
                    </td>
                    <td class="admin">
                        <a href="{{ path('member_enabled', {'id': user.id}) }}">
                            <button class="onoff {{ user.enabled == false ? 'red' : 'green' }}">
                                {{ user.enabled == false ? 'NON' : 'OUI' }}
                            </button></a>
                    </td>
                </tr>
            {% endfor %}
            <hr>
            </tbody>
        </table>
    </div>

    <div class="modal fade" id="exampleModal">
        <div class="modal-dialog modal-sm text-center">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title font-lato"></h4>
                </div>
                <div class="modal-body">
                    {{ form_start(form) }}
                    <div class="form-hidden">{{ form_label(form.Roles) }}</div>
                    {{ form_widget(form.Roles) }}
                    {{ form_widget(form.Id) }}
                    {{ form_widget(form.Ok) }}
                    {{ form_end(form) }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $('#exampleModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget);
            var id = button.data('id');
            var name = button.data('name');
            var firstname = button.data('firstname');
            var modal = $(this);
            modal.find('.modal-title').text('Promouvoir  ' + name + ' ' + firstname);
            modal.find('#numobundle_promote_Id').val(id)
        })
    </script>
    <script src="{{ asset('js/member.js') }}"></script>

{% endblock %}


